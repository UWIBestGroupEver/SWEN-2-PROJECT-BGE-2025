{
	"info": {
		"_postman_id": "c40c5761-c825-45c6-a773-e89e73e01ceb",
		"name": "Base_API_Tests",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "49380564",
		"_collection_link": "https://anayafelixwork-4442992.postman.co/workspace/BestGroupEver_API_Testing~d8ccf9b7-20f9-47fb-ab2a-68b7d56ae1ca/collection/49380564-c40c5761-c825-45c6-a773-e89e73e01ceb?action=share&source=collection_link&creator=49380564"
	},
	"item": [
		{
			"name": "Student_Tests",
			"item": [
				{
					"name": "Signup_Student",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Student signup returns expected status\", function () {\r",
									"    pm.expect([200, 400, 401]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Student signup response has expected fields\", function () {\r",
									"    const json = pm.response.json();\r",
									"    if (pm.response.code === 200) {\r",
									"        pm.expect(json).to.have.property(\"access_token\");\r",
									"        // store for later requests\r",
									"        pm.environment.set(\"student_token\", json.access_token);\r",
									"    } else {\r",
									"        pm.expect(json).to.have.property(\"message\");\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{student_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"username\": \"student5\",\r\n  \"password\": \"test123\",\r\n  \"type\": \"student\",\r\n  \"gpa\":\"3.0\",\r\n  \"degree\":\"Bsc.Computer Science\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/signup",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"signup"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login_Student",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Login returns 200 or 401\", function () {\r",
									"    pm.expect([200, 401]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Login response has token or error message\", function () {\r",
									"    const json = pm.response.json();\r",
									"    if (pm.response.code === 200) {\r",
									"        pm.expect(json).to.have.property(\"access_token\");\r",
									"        pm.environment.set(\"login_token\", json.access_token);\r",
									"    } else {\r",
									"        pm.expect(json).to.have.property(\"message\");\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{student_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"username\": \"student5\",\r\n  \"password\": \"test123\"\r\n}\r\n"
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/login",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Student_Apply",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Student apply returns expected status\", function () {\r",
									"    pm.expect([201, 400, 403]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Student apply response has message\", function () {\r",
									"    const json = pm.response.json();\r",
									"    pm.expect(json).to.have.property(\"message\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{student_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://127.0.0.1:5000 /api/applications/student_apply",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000 ",
							"path": [
								"api",
								"applications",
								"student_apply"
							]
						}
					},
					"response": []
				},
				{
					"name": "Student_Check_My_Application_Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Student my-application returns appropriate status\", function () {\r",
									"    pm.expect([200, 403, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"My application payload is valid\", function () {\r",
									"        const json = pm.response.json();\r",
									"        pm.expect(json).to.have.property(\"application_id\");\r",
									"        pm.expect(json).to.have.property(\"student_id\");\r",
									"        pm.expect(json).to.have.property(\"status\");\r",
									"        pm.environment.set(\"my_application_status\", json.status);\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"Error response has message\", function () {\r",
									"        const json = pm.response.json();\r",
									"        pm.expect(json).to.have.property(\"message\");\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{student_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://127.0.0.1:5000/api/applications/my",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"applications",
								"my"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							"// =============================\r",
							"// Student Auto Signup + Login\r",
							"// =============================\r",
							"\r",
							"// If we already have a token, don't do anything\r",
							"if (pm.environment.get(\"student_token\")) {\r",
							"    console.log(\"student_token already present\");\r",
							"    return;\r",
							"}\r",
							"\r",
							"const baseUrl = pm.environment.get(\"base_url\") || \"http://localhost:5000\";\r",
							"const studentCredentials = {\r",
							"    username: \"student1\",\r",
							"    password: \"test123\"\r",
							"};\r",
							"\r",
							"// Helper: log in student and set token\r",
							"function loginStudent() {\r",
							"    console.log(\"Attempting student login...\");\r",
							"\r",
							"    const loginRequest = {\r",
							"        url: baseUrl + \"/api/login\",\r",
							"        method: \"POST\",\r",
							"        header: { \"Content-Type\": \"application/json\" },\r",
							"        body: {\r",
							"            mode: \"raw\",\r",
							"            raw: JSON.stringify(studentCredentials)\r",
							"        }\r",
							"    };\r",
							"\r",
							"    pm.sendRequest(loginRequest, function (err, res) {\r",
							"        if (err) {\r",
							"            console.error(\"Login error:\", err);\r",
							"            return;\r",
							"        }\r",
							"\r",
							"        if (res.code === 200) {\r",
							"            const data = res.json();\r",
							"            if (!data.access_token) {\r",
							"                console.error(\"Login succeeded but no access_token in response\");\r",
							"                return;\r",
							"            }\r",
							"            pm.environment.set(\"student_token\", data.access_token);\r",
							"            console.log(\"student_token set from login\");\r",
							"        } else if (res.code === 401) {\r",
							"            console.log(\"Student login failed with 401 – trying signup...\");\r",
							"            signupStudentAndLogin();\r",
							"        } else {\r",
							"            console.error(\"Login failed with status\", res.code, res.json());\r",
							"        }\r",
							"    });\r",
							"}\r",
							"\r",
							"// Helper: sign up student, then log in\r",
							"function signupStudentAndLogin() {\r",
							"    console.log(\"Signing up test student user...\");\r",
							"\r",
							"    const signupRequest = {\r",
							"        url: baseUrl + \"/api/signup\",\r",
							"        method: \"POST\",\r",
							"        header: { \"Content-Type\": \"application/json\" },\r",
							"        body: {\r",
							"            mode: \"raw\",\r",
							"            raw: JSON.stringify({\r",
							"                username: studentCredentials.username,\r",
							"                password: studentCredentials.password,\r",
							"                type: \"student\",\r",
							"                gpa: 4.0,               // required by your API\r",
							"                degree: \"BSc Computer Science\"\r",
							"            })\r",
							"        }\r",
							"    };\r",
							"\r",
							"    pm.sendRequest(signupRequest, function (err, res) {\r",
							"        if (err) {\r",
							"            console.error(\"Signup error:\", err);\r",
							"            return;\r",
							"        }\r",
							"\r",
							"        if (res.code !== 200) {\r",
							"            console.error(\"Signup failed with status\", res.code, res.json());\r",
							"            return;\r",
							"        }\r",
							"\r",
							"        console.log(\"Student signup successful, logging in...\");\r",
							"        loginStudent();\r",
							"    });\r",
							"}\r",
							"\r",
							"// Start by trying to log in\r",
							"loginStudent();\r",
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Staff_Tests",
			"item": [
				{
					"name": "Signup_Staff",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Staff signup returns expected status\", function () {\r",
									"    pm.expect([200, 400, 401]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Staff signup response has expected fields\", function () {\r",
									"    const json = pm.response.json();\r",
									"    if (pm.response.code === 200) {\r",
									"        pm.expect(json).to.have.property(\"access_token\");\r",
									"        pm.environment.set(\"staff_token\", json.access_token);\r",
									"    } else {\r",
									"        pm.expect(json).to.have.property(\"message\");\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"username\": \"mendez\",\r\n  \"password\": \"men123\",\r\n  \"type\": \"staff\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/signup",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"signup"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login_Staff",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Login returns 200 or 401\", function () {\r",
									"    pm.expect([200, 401]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Login response has token or error message\", function () {\r",
									"    const json = pm.response.json();\r",
									"    if (pm.response.code === 200) {\r",
									"        pm.expect(json).to.have.property(\"access_token\");\r",
									"        pm.environment.set(\"login_token\", json.access_token);\r",
									"    } else {\r",
									"        pm.expect(json).to.have.property(\"message\");\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"username\": \"mendez\",\r\n  \"password\": \"men123\"\r\n}\r\n"
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/login",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Staff_Shortlist_Application",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Shortlist status is valid\", function () {\r",
									"    pm.expect([201, 400, 403, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Shortlist response has message\", function () {\r",
									"    const json = pm.response.json();\r",
									"    pm.expect(json).to.have.property(\"message\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"position_id\": 1\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/applications/3/shortlist",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"applications",
								"3",
								"shortlist"
							]
						}
					},
					"response": []
				},
				{
					"name": "Staff_View_Applications",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"View applications status is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"Applications list is an array and maybe store first id\", function () {\r",
									"    const json = pm.response.json();\r",
									"    pm.expect(json).to.be.an(\"array\");\r",
									"    if (json.length > 0) {\r",
									"        pm.expect(json[0]).to.have.property(\"application_id\");\r",
									"        pm.environment.set(\"application_id\", json[0].application_id.toString());\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"username\": \"banks\",\r\n  \"password\": \"bank123\"\r\n}\r\n"
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/applications/all_applications",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"applications",
								"all_applications"
							]
						}
					},
					"response": []
				},
				{
					"name": "Staff_Get_Application_by_Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status filter returns valid status code\", function () {\r",
									"    pm.expect([200, 400, 403]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"Filtered applications all have correct status\", function () {\r",
									"        const json = pm.response.json();\r",
									"        const requestedStatus = pm.request.url.path.slice(-1)[0].toUpperCase();\r",
									"        pm.expect(json).to.be.an(\"array\");\r",
									"        if (json.length > 0) {\r",
									"            json.forEach(app => {\r",
									"                pm.expect(app).to.have.property(\"status\");\r",
									"                pm.expect(app.status).to.eql(requestedStatus);\r",
									"            });\r",
									"        }\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"Error response has message\", function () {\r",
									"        const json = pm.response.json();\r",
									"        pm.expect(json).to.have.property(\"message\");\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://127.0.0.1:5000/api/applications/status/SHORTLISTED",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"applications",
								"status",
								"SHORTLISTED"
							]
						}
					},
					"response": []
				},
				{
					"name": "Check_Application_Status",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Application status returns 200 or 404\", function () {\r",
									"    pm.expect([200, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"Application payload has basic fields\", function () {\r",
									"        const json = pm.response.json();\r",
									"        pm.expect(json).to.have.property(\"application_id\");\r",
									"        pm.expect(json).to.have.property(\"student_id\");\r",
									"        pm.expect(json).to.have.property(\"status\");\r",
									"        pm.expect([\"APPLIED\", \"SHORTLISTED\", \"ACCEPTED\", \"REJECTED\"])\r",
									"          .to.include(json.status);\r",
									"    });\r",
									"} else if (pm.response.code === 404) {\r",
									"    pm.test(\"404 has message\", function () {\r",
									"        const json = pm.response.json();\r",
									"        pm.expect(json).to.have.property(\"message\", \"Application not found\");\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{staff_token}}",
								"type": "text",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"username\": \"banks\",\r\n  \"password\": \"bank123\"\r\n}\r\n"
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/applications/3",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"applications",
								"3"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							"// =============================\r",
							"// Staff Auto Signup + Login\r",
							"// =============================\r",
							"\r",
							"// If we already have a token, don't do anything\r",
							"if (pm.environment.get(\"staff_token\")) {\r",
							"    console.log(\"staff_token already present\");\r",
							"    return;\r",
							"}\r",
							"\r",
							"const baseUrl = pm.environment.get(\"base_url\") || \"http://localhost:5000\";\r",
							"const staffCredentials = {\r",
							"    username: \"staff1\",\r",
							"    password: \"test123\"\r",
							"};\r",
							"\r",
							"// Helper: log in staff and set token\r",
							"function loginStaff() {\r",
							"    console.log(\"Attempting staff login...\");\r",
							"\r",
							"    const loginRequest = {\r",
							"        url: baseUrl + \"/api/login\",\r",
							"        method: \"POST\",\r",
							"        header: { \"Content-Type\": \"application/json\" },\r",
							"        body: {\r",
							"            mode: \"raw\",\r",
							"            raw: JSON.stringify(staffCredentials)\r",
							"        }\r",
							"    };\r",
							"\r",
							"    pm.sendRequest(loginRequest, function (err, res) {\r",
							"        if (err) {\r",
							"            console.error(\"Staff login error:\", err);\r",
							"            return;\r",
							"        }\r",
							"\r",
							"        if (res.code === 200) {\r",
							"            const data = res.json();\r",
							"            if (!data.access_token) {\r",
							"                console.error(\"Staff login succeeded but no access_token in response\");\r",
							"                return;\r",
							"            }\r",
							"            pm.environment.set(\"staff_token\", data.access_token);\r",
							"            console.log(\"staff_token set from login\");\r",
							"        } else if (res.code === 401) {\r",
							"            console.log(\"Staff login failed with 401 – trying signup...\");\r",
							"            signupStaffAndLogin();\r",
							"        } else {\r",
							"            console.error(\"Staff login failed with status\", res.code, res.json());\r",
							"        }\r",
							"    });\r",
							"}\r",
							"\r",
							"// Helper: sign up staff, then log in\r",
							"function signupStaffAndLogin() {\r",
							"    console.log(\"Signing up test staff user...\");\r",
							"\r",
							"    const signupRequest = {\r",
							"        url: baseUrl + \"/api/signup\",\r",
							"        method: \"POST\",\r",
							"        header: { \"Content-Type\": \"application/json\" },\r",
							"        body: {\r",
							"            mode: \"raw\",\r",
							"            raw: JSON.stringify({\r",
							"                username: staffCredentials.username,\r",
							"                password: staffCredentials.password,\r",
							"                type: \"staff\"\r",
							"            })\r",
							"        }\r",
							"    };\r",
							"\r",
							"    pm.sendRequest(signupRequest, function (err, res) {\r",
							"        if (err) {\r",
							"            console.error(\"Staff signup error:\", err);\r",
							"            return;\r",
							"        }\r",
							"\r",
							"        if (res.code !== 200) {\r",
							"            console.error(\"Staff signup failed with status\", res.code, res.json());\r",
							"            return;\r",
							"        }\r",
							"\r",
							"        console.log(\"Staff signup successful, logging in...\");\r",
							"        loginStaff();\r",
							"    });\r",
							"}\r",
							"\r",
							"// Start by trying to log in\r",
							"loginStaff();\r",
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Employer_Tests",
			"item": [
				{
					"name": "Signup_Employer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Employer signup returns expected status\", function () {\r",
									"    pm.expect([200, 400, 401]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Employer signup response has expected fields\", function () {\r",
									"    const json = pm.response.json();\r",
									"    if (pm.response.code === 200) {\r",
									"        pm.expect(json).to.have.property(\"access_token\");\r",
									"        pm.environment.set(\"employer_token\", json.access_token);\r",
									"    } else {\r",
									"        pm.expect(json).to.have.property(\"message\");\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{employer_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"username\": \"banks\",\r\n  \"password\": \"bank123\",\r\n  \"type\": \"employer\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/signup",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"signup"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login_Employer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Login returns 200 or 401\", function () {\r",
									"    pm.expect([200, 401]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Login response has token or error message\", function () {\r",
									"    const json = pm.response.json();\r",
									"    if (pm.response.code === 200) {\r",
									"        pm.expect(json).to.have.property(\"access_token\");\r",
									"        pm.environment.set(\"login_token\", json.access_token);\r",
									"    } else {\r",
									"        pm.expect(json).to.have.property(\"message\");\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{employer_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"username\": \"banks\",\r\n  \"password\": \"bank123\"\r\n}\r\n"
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/login",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Employer_Create_Position",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Create position status is as expected\", function () {\r",
									"    pm.expect([201, 400, 403]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Create position response has message\", function () {\r",
									"    const json = pm.response.json();\r",
									"    pm.expect(json).to.have.property(\"message\");\r",
									"    if (pm.response.code === 201) {\r",
									"        pm.expect(json).to.have.property(\"opening_id\");\r",
									"        pm.environment.set(\"position_id\", json.opening_id.toString());\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{employer_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"title\": \"Software Engineering Intern\",\r\n  \"number\": 3\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/openings/1",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"openings",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "Employer_Decide",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Decision status is valid\", function () {\r",
									"    pm.expect([200, 400, 403, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"pm.test(\"Decision response has message\", function () {\r",
									"    const json = pm.response.json();\r",
									"    pm.expect(json).to.have.property(\"message\");\r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{employer_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"decision\": \"ACCEPTED\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://127.0.0.1:5000/api/applications/3/decision",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"applications",
								"3",
								"decision"
							]
						}
					},
					"response": []
				},
				{
					"name": "Employer_View_My_Openings",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"My openings returns valid status\", function () {\r",
									"    pm.expect([200, 403, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"My openings is an array with expected fields\", function () {\r",
									"        const json = pm.response.json();\r",
									"        pm.expect(json).to.be.an(\"array\");\r",
									"        if (json.length > 0) {\r",
									"            const pos = json[0];\r",
									"            pm.expect(pos).to.have.property(\"position_id\");\r",
									"            pm.expect(pos).to.have.property(\"title\");\r",
									"            pm.expect(pos).to.have.property(\"number_of_positions\");\r",
									"            pm.expect(pos).to.have.property(\"employer_id\");\r",
									"            \r",
									"            pm.environment.set(\"position_id\", pos.position_id.toString());\r",
									"        }\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"Error response has message\", function () {\r",
									"        const json = pm.response.json();\r",
									"        pm.expect(json).to.have.property(\"message\");\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{employer_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://127.0.0.1:5000/api/openings/my",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"openings",
								"my"
							]
						}
					},
					"response": []
				},
				{
					"name": "Employer_View_Shortlisted_Per_Position",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Opening applications returns valid status\", function () {\r",
									"    pm.expect([200, 403, 404]).to.include(pm.response.code);\r",
									"});\r",
									"\r",
									"if (pm.response.code === 200) {\r",
									"    pm.test(\"Opening applications is an array of applications\", function () {\r",
									"        const json = pm.response.json();\r",
									"        pm.expect(json).to.be.an(\"array\");\r",
									"        if (json.length > 0) {\r",
									"            const app = json[0];\r",
									"            pm.expect(app).to.have.property(\"application_id\");\r",
									"            pm.expect(app).to.have.property(\"student_id\");\r",
									"            pm.expect(app).to.have.property(\"status\");\r",
									"        }\r",
									"    });\r",
									"} else {\r",
									"    pm.test(\"Error response has message\", function () {\r",
									"        const json = pm.response.json();\r",
									"        pm.expect(json).to.have.property(\"message\");\r",
									"    });\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{employer_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "http://127.0.0.1:5000/api/openings/10/applications",
							"protocol": "http",
							"host": [
								"127",
								"0",
								"0",
								"1"
							],
							"port": "5000",
							"path": [
								"api",
								"openings",
								"10",
								"applications"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							"// =============================\r",
							"// Employer Auto Signup + Login\r",
							"// =============================\r",
							"\r",
							"// If we already have a token, don't do anything\r",
							"if (pm.environment.get(\"employer_token\")) {\r",
							"    console.log(\"employer_token already present\");\r",
							"    return;\r",
							"}\r",
							"\r",
							"const baseUrl = pm.environment.get(\"base_url\") || \"http://localhost:5000\";\r",
							"const employerCredentials = {\r",
							"    username: \"employer1\",\r",
							"    password: \"test123\"\r",
							"};\r",
							"\r",
							"// Helper: log in employer and set token\r",
							"function loginEmployer() {\r",
							"    console.log(\"Attempting employer login...\");\r",
							"\r",
							"    const loginRequest = {\r",
							"        url: baseUrl + \"/api/login\",\r",
							"        method: \"POST\",\r",
							"        header: { \"Content-Type\": \"application/json\" },\r",
							"        body: {\r",
							"            mode: \"raw\",\r",
							"            raw: JSON.stringify(employerCredentials)\r",
							"        }\r",
							"    };\r",
							"\r",
							"    pm.sendRequest(loginRequest, function (err, res) {\r",
							"        if (err) {\r",
							"            console.error(\"Employer login error:\", err);\r",
							"            return;\r",
							"        }\r",
							"\r",
							"        if (res.code === 200) {\r",
							"            const data = res.json();\r",
							"            if (!data.access_token) {\r",
							"                console.error(\"Employer login succeeded but no access_token returned\");\r",
							"                return;\r",
							"            }\r",
							"            pm.environment.set(\"employer_token\", data.access_token);\r",
							"            console.log(\"employer_token set from login\");\r",
							"        } else if (res.code === 401) {\r",
							"            console.log(\"Employer login failed with 401 – attempting signup...\");\r",
							"            signupEmployerAndLogin();\r",
							"        } else {\r",
							"            console.error(\"Employer login failed with status\", res.code, res.json());\r",
							"        }\r",
							"    });\r",
							"}\r",
							"\r",
							"// Helper: sign up employer, then log in\r",
							"function signupEmployerAndLogin() {\r",
							"    console.log(\"Signing up test employer user...\");\r",
							"\r",
							"    const signupRequest = {\r",
							"        url: baseUrl + \"/api/signup\",\r",
							"        method: \"POST\",\r",
							"        header: { \"Content-Type\": \"application/json\" },\r",
							"        body: {\r",
							"            mode: \"raw\",\r",
							"            raw: JSON.stringify({\r",
							"                username: employerCredentials.username,\r",
							"                password: employerCredentials.password,\r",
							"                type: \"employer\"\r",
							"            })\r",
							"        }\r",
							"    };\r",
							"\r",
							"    pm.sendRequest(signupRequest, function (err, res) {\r",
							"        if (err) {\r",
							"            console.error(\"Employer signup error:\", err);\r",
							"            return;\r",
							"        }\r",
							"\r",
							"        if (res.code !== 200) {\r",
							"            console.error(\"Employer signup failed with status\", res.code, res.json());\r",
							"            return;\r",
							"        }\r",
							"\r",
							"        console.log(\"Employer signup successful — logging in...\");\r",
							"        loginEmployer();\r",
							"    });\r",
							"}\r",
							"\r",
							"// Start by trying to log in\r",
							"loginEmployer();\r",
							""
						]
					}
				}
			]
		},
		{
			"name": "Identify_User",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Identify status is 200 or unauthorized\", function () {\r",
							"    pm.expect([200, 401]).to.include(pm.response.code);\r",
							"});\r",
							"\r",
							"if (pm.response.code === 200) {\r",
							"    pm.test(\"Identify returns message with username and id\", function () {\r",
							"        const json = pm.response.json();\r",
							"        pm.expect(json).to.have.property(\"message\");\r",
							"        pm.expect(json.message).to.include(\"username:\");\r",
							"        pm.expect(json.message).to.include(\"id\");\r",
							"    });\r",
							"}\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"username\": \"student5\",\r\n  \"password\": \"test123\"\r\n}\r\n"
				},
				"url": {
					"raw": "http://127.0.0.1:5000/api/identify",
					"protocol": "http",
					"host": [
						"127",
						"0",
						"0",
						"1"
					],
					"port": "5000",
					"path": [
						"api",
						"identify"
					]
				}
			},
			"response": []
		},
		{
			"name": "Health",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Health payload is correct\", function () {\r",
							"    const json = pm.response.json();\r",
							"    pm.expect(json).to.have.property(\"status\", \"ok\");\r",
							"    pm.expect(json).to.have.property(\"message\", \"pong\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://127.0.0.1:5000/api/applications/ping",
					"protocol": "http",
					"host": [
						"127",
						"0",
						"0",
						"1"
					],
					"port": "5000",
					"path": [
						"api",
						"applications",
						"ping"
					]
				}
			},
			"response": []
		},
		{
			"name": "Login Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Login returns 200 or 401\", function () {\r",
							"    pm.expect([200, 401]).to.include(pm.response.code);\r",
							"});\r",
							"\r",
							"pm.test(\"Login response has token or error message\", function () {\r",
							"    const json = pm.response.json();\r",
							"    if (pm.response.code === 200) {\r",
							"        pm.expect(json).to.have.property(\"access_token\");\r",
							"        pm.environment.set(\"login_token\", json.access_token);\r",
							"    } else {\r",
							"        pm.expect(json).to.have.property(\"message\");\r",
							"    }\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"username\": \"banks\",\r\n  \"password\": \"bank123\"\r\n}\r\n"
				},
				"url": {
					"raw": "http://127.0.0.1:5000/api/login",
					"protocol": "http",
					"host": [
						"127",
						"0",
						"0",
						"1"
					],
					"port": "5000",
					"path": [
						"api",
						"login"
					]
				}
			},
			"response": []
		},
		{
			"name": "Logout",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Logout status is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Logout message is correct\", function () {\r",
							"    const json = pm.response.json();\r",
							"    pm.expect(json).to.have.property(\"message\", \"Logged Out!\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"username\": \"student5\",\r\n  \"password\": \"test123\"\r\n}\r\n"
				},
				"url": {
					"raw": "http://127.0.0.1:5000/api/logout",
					"protocol": "http",
					"host": [
						"127",
						"0",
						"0",
						"1"
					],
					"port": "5000",
					"path": [
						"api",
						"logout"
					]
				}
			},
			"response": []
		}
	]
}